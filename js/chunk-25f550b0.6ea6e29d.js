(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25f550b0"],{"2d81":function(t,a,e){},dee2:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("a-card",[e("a-row",{attrs:{type:"flex",align:"middle"}},[e("img",{staticStyle:{width:"100%"},attrs:{src:"/../images/banner.png",alt:"Banner"}})]),e("div",[e("a-form",{staticClass:"product__search-form",on:{submit:t.handleSearch}},[e("a-row",[e("a-col",{staticStyle:{"padding-right":"20px"},attrs:{span:18}},[e("a-form-item",[e("a-input-search",{attrs:{placeholder:"Mã Phòng"},model:{value:t.params.MaPhong,callback:function(a){t.$set(t.params,"MaPhong",a)},expression:"params.MaPhong"}},[e("a-icon",{attrs:{type:"search"}})],1)],1)],1),e("a-col",{staticStyle:{"padding-right":"20px"},attrs:{span:3}},[e("a-form-item",[e("a-date-picker",{attrs:{format:"DD-MM-YYYY"},on:{change:t.getDate1},model:{value:this.params.NgayBatDau,callback:function(a){t.$set(this.params,"NgayBatDau",a)},expression:"this.params.NgayBatDau"}})],1)],1),e("a-col",{staticStyle:{float:"right"},attrs:{span:3}},[e("a-form-item",[e("a-date-picker",{attrs:{format:"DD-MM-YYYY"},on:{change:t.getDate2},model:{value:this.params.NgayKetThuc,callback:function(a){t.$set(this.params,"NgayKetThuc",a)},expression:"this.params.NgayKetThuc"}})],1)],1)],1)],1),e("a-button",{attrs:{type:"primary","html-type":"submit"},on:{click:t.handleSearch}},[t._v(" Search ")]),e("a-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary","html-type":"submit"},on:{click:t.resetButton}},[t._v(" Reset ")])],1),e("div",{staticClass:"col-md-12 container",staticStyle:{"margin-top":"50px"}},[e("a-row",[e("a-col",{staticClass:"bar",staticStyle:{width:"50px",height:"30px"},attrs:{xs:24,sm:24,md:4,lg:4,id:"cell6"}}),e("a-col",{staticClass:"bar",staticStyle:{width:"5%",height:"50px"},attrs:{id:"chuthich",xs:24,sm:24,md:4,lg:4}},[t._v("Lịch học")]),e("a-col",{staticClass:"bar",staticStyle:{width:"50px",height:"30px"},attrs:{xs:24,sm:24,md:4,lg:4,id:"cell5"}}),e("a-col",{staticClass:"bar",staticStyle:{width:"5%",height:"50px"},attrs:{id:"chuthich",xs:24,sm:24,md:4,lg:4}},[t._v("Lịch thi")]),e("a-col",{staticClass:"bar",staticStyle:{width:"50px",height:"30px"},attrs:{xs:24,sm:24,md:4,lg:4,id:"cell7"}}),e("a-col",{staticClass:"bar",staticStyle:{width:"15%",height:"50px"},attrs:{id:"chuthich",xs:24,sm:24,md:4,lg:4}},[t._v("Lịch xin phòng tự do")])],1),e("div",{staticStyle:{"border-bottom":"1px solid #b3b7bb","padding-bottom":"10px","margin-top":"20px"}},[t.tenphong?e("h5",{staticStyle:{"vertical-align":"baseline",color:"#667580","line-height":"18px","font-family":"Tahoma !important",margin:"0"}},[t._v("Lịch phòng học "+t._s(t.tenphong)+" ")]):e("h5",{staticStyle:{"vertical-align":"baseline",color:"#667580","line-height":"18px","font-family":"Tahoma !important",margin:"0"}},[t._v("Lịch phòng học ")])]),e("div",{staticClass:"table-wrap",staticStyle:{"margin-top":"20px"}},[this.data.length>0?e("table",{staticClass:"table table-bordered",staticStyle:{"--bs-table-bg":"#f3f7f9","text-align":"center","line-height":"1.42857143"}},[e("thead",[e("tr",[e("th",{staticStyle:{width:"50px!important","max-width":"50px!important","text-align":"center"},attrs:{id:"header11"}},[t._v("Tiết")]),t._l(t.datelist,(function(a,s){return e("th",{key:s,attrs:{id:"header1"}},[t._v(t._s(a.split("-")[2])+"/"+t._s(a.split("-")[1]))])}))],2)]),e("tbody",t._l(15,(function(a,s){return e("tr",{key:s},[e("td",{attrs:{id:"cell1"}},[t._v(t._s(s+1))]),t._l(t.data,(function(a,o){return[a.isRowUsed.has(s)?t._e():e("td",{key:o,attrs:{id:"cell"}}),t._l(a.items,(function(a){return[s===a.TuTiet?[0==a.IsType?e("td",{staticStyle:{"background-color":"yellow"},attrs:{rowspan:a.DenTiet-a.TuTiet+1,id:"cell2"}},[e("span",[t._v("Tiết: "+t._s(a.TuTiet+1)+" - "+t._s(a.DenTiet+1))]),e("br"),e("span",[t._v("Khoá: "+t._s(a.TenKhoaHoc))]),e("br"),e("span",[t._v("Mã Môn: "+t._s(a.MaMonHoc))]),e("br"),e("span",[t._v("Tên Môn: "+t._s(a.TenMonHoc))]),e("br"),e("span",[t._v("Tên Lớp: "+t._s(a.TenLopHoc))]),e("br")]):1==a.IsType?e("td",{staticStyle:{"background-color":"green"},attrs:{rowspan:a.DenTiet-a.TuTiet+1,id:"cell3"}},[e("span",[t._v("Tiết: "+t._s(a.TuTiet+1)+" - "+t._s(a.DenTiet+1))]),e("br"),e("span",[t._v("Khoá: "+t._s(a.TenKhoaHoc))]),e("br"),e("span",[t._v("Mã Môn: "+t._s(a.MaMonHoc))]),e("br"),e("span",[t._v("Tên Môn: "+t._s(a.TenMonHoc))]),e("br"),e("span",[t._v("Tên Lớp: "+t._s(a.TenLopHoc))]),e("br")]):2==a.IsType?e("td",{staticStyle:{"background-color":"cornflowerblue"},attrs:{rowspan:a.DenTiet-a.TuTiet+1,id:"cell4"}},[e("span",[t._v("Tiết: "+t._s(a.TuTiet+1)+" - "+t._s(a.DenTiet+1))]),e("br"),e("span",[t._v("Khoá: "+t._s(a.TenKhoaHoc))]),e("br"),e("span",[t._v("Mô tả: "+t._s(a.TenMonHoc))]),e("br"),e("span",[t._v("Chi Tiết: "+t._s(a.TenLopHoc))]),e("br")]):t._e()]:t._e()]}))]}))],2)})),0)]):t._e()])],1)],1)],1)},o=[],i=e("f121");const n="/LichSuPH";class c{getLichSuPH(t){return i["a"].get(n,{params:t})}}var r=new c,h=e("7f45"),l=e.n(h),g={data(){return{data:[],totalRecords:void 0,totalPages:void 0,TenPhong:void 0,new_data:[],params:{MaPhong:"",NgayBatDau:"",NgayKetThuc:""},StartDay:void 0,EndDay:void 0,IDDot:void 0,datahk:[],Hoten:void 0,count:0,datelist:[],tenphong:void 0}},created(){localStorage.setItem("link",this.$route.fullPath),this.getPhongHocLS()},methods:{generateDateList(t,a){const e=l()(t),s=l()(a),o=[];let i=e;console.log(i);while(i<=s)o.push(i.format("YYYY-MM-DD")),i.add(1,"days");return console.log(o),o},readlData(t,a){const e=[];for(const s of a){const a={},o=""+s;a[o]={NgayBatDau:s,NgayKetThuc:s,NgayBatDauHoc:s,NgayKetThuchoc:s,isRowUsed:new Set};for(const[i,n]of t.entries()){if(n.NgayBatDau==s){e.push(n);break}if(i===t.length-1&&n.NgayBatDau!=s){e.push(Object.values(a)[0]);break}}}return console.log(e),e},groupData(t){const a={};for(const s of t){const t=`${s.MaPhong}-${s.TenPhong}-${s.NgayBatDau}-${s.NgayKetThuc}-${s.NgayBatDauHoc}-${s.NgayKetThucHoc}`;a[t]||(a[t]={MaPhong:s.MaPhong,TenPhong:s.TenPhong,NgayBatDau:s.NgayBatDau.split("T")[0],NgayKetThuc:s.NgayKetThuc.split("T")[0],NgayBatDauHoc:s.NgayBatDauHoc.split("T")[0],NgayKetThucHoc:s.NgayKetThucHoc.split("T")[0],isRowUsed:new Set,items:[]});for(let e=s.TuTiet-1;e<s.DenTiet;e++)a[t].isRowUsed.add(e);a[t].items.push({DenTiet:s.DenTiet-1,IDKhoaHoc:s.IDKhoaHoc,IsType:s.IsType,MaHocPhan:s.MaHocPhan,MaLopHoc:s.MaLopHoc,MaLopHocPhan:s.MaLopHocPhan,MaMonHoc:s.MaMonHoc,TenKhoaHoc:s.TenKhoaHoc,TenLopHoc:s.TenLopHoc,TenMonHoc:s.TenMonHoc,Thu:s.Thu,TuTiet:s.TuTiet-1})}const e=Object.values(a);return e},async getPhongHocLS(){await r.getLichSuPH(this.params).then(t=>{try{this.data=[],this.data=this.groupData(t.data.records),this.StartDay=this.params.NgayBatDau,this.EndDay=this.params.NgayKetThuc,this.tenphong=this.data[0].MaPhong,this.datelist=this.generateDateList(this.params.NgayBatDau,this.params.NgayKetThuc),this.data=this.readlData(this.data,this.datelist),console.log(this.tenphong),console.log(this.data)}catch(a){console.log(a),console.log("co loi"),this.data=[],console.log(this.data)}})},handleSearch(t){t.preventDefault(),console.log(this.params),this.getPhongHocLS()},resetButton(){this.params={MaPhong:"",NgayBatDau:"",NgayKetThuc:""},this.tenphong=void 0,this.getPhongHocLS()},getDate1(t){var a=l()(t._d).format("YYYY-MM-DDTHH:mm:ss.sssZ"),e=l.a.utc(a).tz("Asia/Ho_Chi_Minh").format("YYYY-MM-DD");this.params.NgayBatDau=e,console.log(this.params.ngaythi)},getDate2(t){var a=l()(t._d).format("YYYY-MM-DDTHH:mm:ss.sssZ"),e=l.a.utc(a).tz("Asia/Ho_Chi_Minh").format("YYYY-MM-DD");this.params.NgayKetThuc=e,console.log(this.params.ngaythi)}}},p=g,d=(e("feed"),e("2877")),u=Object(d["a"])(p,s,o,!1,null,"724e6d8c",null);a["default"]=u.exports},feed:function(t,a,e){"use strict";e("2d81")}}]);
//# sourceMappingURL=chunk-25f550b0.6ea6e29d.js.map